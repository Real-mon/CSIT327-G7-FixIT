{% extends 'base.html' %}

{% block content %}
<style>

.container {
    /* Reduced max-width slightly to make the content feel more centered */
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
}
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #8fbaf3;
    padding-bottom: 10px;
    margin-bottom: 20px;
}
.page-title {
    color: #0245a3;
    margin: 0;
    /* Increased title font size */
    font-size: 1.8em;
}

/* Back Button Styling */
.back-button {
    background-color: #8fbaf3;
    color: #0245a3;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    text-decoration: none;
    font-weight: bold;
    transition: background-color 0.3s;
    display: inline-flex;
    align-items: center;
    /* Adjusted font size for buttons */
    font-size: 0.95em;
}
.back-button:hover {
    background-color: #6a9ce7;
}

/* Table Styling */
.history-table {
    /* Set a specific max-width for the table when it's centered,
       ensuring it doesn't just stretch to 100% of the container if it's too big */
    max-width: 100%;
    width: 100%;
    border-collapse: collapse;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    background-color: #fff;
    /* Added font size to the table for general text */
    font-size: 1.0em;
}

/* Wrapper for centering the table */
.table-wrapper {
    display: flex;
    justify-content: center;
}

.history-table th, .history-table td {
    /* Increased padding for a larger, airier feel */
    padding: 14px 18px;
    text-align: left;
    border: 1px solid #ddd;
}

.history-table thead th {
    background-color: #0245a3;
    color: white;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    /* Slightly larger font for headers */
    font-size: 1.05em;
}

/* Zebra Striping */
.history-table tbody .row-odd {
    background-color: #f9f9f9;
}
.history-table tbody tr:hover {
    background-color: #f0f0f0;
    cursor: default;
}

/* Status Color Coding */
.status-solved {
    font-weight: bold;
    color: #1a7f37;
    background-color: #e6ffe6;
    border-radius: 4px;
    padding: 4px 8px;
    text-align: center;
    white-space: nowrap;
    /* Ensured status badge text is readable */
    font-size: 0.9em;
}

/* Date and Description Styling */
.date-col {
    white-space: nowrap;
    /* Date column slightly smaller than body text */
    font-size: 0.9em;
    color: #666;
}
.description-col {
    /* Slightly increased max width for description */
    max-width: 450px;
}

/* No Tickets Message */
.no-tickets-message {
    padding: 20px;
    background-color: #e3f2fd;
    color: #0245a3;
    border: 1px solid #90caf9;
    border-radius: 5px;
    margin-top: 20px;
    text-align: center;
    /* Ensured message is large and clear */
    font-size: 1.1em;
}
</style>

<div class="container">

    <div class="page-header">
        <h2 class="page-title">Solved Ticket History</h2>
        <a href="{% url 'user_profile' %}" class="back-button">
            <i class="fas fa-arrow-left mr-2"></i>
           Back to Profile
        </a>
    </div>

    {% if tickets %}
    <div class="table-wrapper">
        <table class="history-table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th class="description-col">Description</th>
                    <th>Status</th>
                    <th>Updated At</th>
                </tr>
            </thead>
            <tbody>
                {% for ticket in tickets %}
                <tr class="{% if loop.index is odd %}row-odd{% else %}row-even{% endif %}">
                    <td data-label="Title">{{ ticket.title }}</td>
                    <td data-label="Description" class="description-col">{{ ticket.description|truncatechars:100 }}</td>
                    <td data-label="Status" class="status-{{ ticket.status|lower }}">{{ ticket.status }}</td>
                    <td data-label="Updated At" class="date-col">{{ ticket.updated_at|date:"M d, Y H:i" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p class="no-tickets-message">ðŸ“˜ No solved tickets have been recorded yet. Great job!</p>
    {% endif %}
</div>
{% endblock %}